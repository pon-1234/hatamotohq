{"version":3,"file":"BaseDropdown-DMT0ptHC.js","sources":["../../../../../app/javascript/src/components/base/BaseDropdown.vue"],"sourcesContent":["<template>\n  <div class=\"base-dropdown\" :class=\"dropdownClasses\" ref=\"dropdown\">\n    <!-- Dropdown Toggle -->\n    <button\n      :id=\"toggleId\"\n      class=\"dropdown-toggle\"\n      :class=\"toggleClasses\"\n      :disabled=\"disabled\"\n      type=\"button\"\n      aria-haspopup=\"true\"\n      :aria-expanded=\"isOpen\"\n      @click=\"toggle\"\n    >\n      <slot name=\"button-content\">\n        {{ text }}\n      </slot>\n    </button>\n\n    <!-- Dropdown Menu -->\n    <transition name=\"dropdown-fade\">\n      <div\n        v-show=\"isOpen\"\n        class=\"dropdown-menu\"\n        :class=\"menuClasses\"\n        :aria-labelledby=\"toggleId\"\n        ref=\"menu\"\n      >\n        <slot />\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'BaseDropdown',\n  props: {\n    text: {\n      type: String,\n      default: ''\n    },\n    variant: {\n      type: String,\n      default: 'secondary'\n    },\n    size: {\n      type: String,\n      default: 'md',\n      validator: (value) => ['sm', 'md', 'lg'].includes(value)\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    right: {\n      type: Boolean,\n      default: false\n    },\n    up: {\n      type: Boolean,\n      default: false\n    },\n    offset: {\n      type: Number,\n      default: 0\n    },\n    boundary: {\n      type: String,\n      default: 'scrollParent'\n    },\n    split: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      isOpen: false,\n      toggleId: `dropdown-toggle-${this._uid}`\n    };\n  },\n  computed: {\n    dropdownClasses() {\n      return {\n        'dropdown': !this.up,\n        'dropup': this.up,\n        'show': this.isOpen\n      };\n    },\n    toggleClasses() {\n      return [\n        'btn',\n        `btn-${this.variant}`,\n        `btn-${this.size}`,\n        {\n          'dropdown-toggle-split': this.split\n        }\n      ];\n    },\n    menuClasses() {\n      return {\n        'show': this.isOpen,\n        'dropdown-menu-right': this.right,\n        'dropdown-menu-up': this.up\n      };\n    }\n  },\n  mounted() {\n    document.addEventListener('click', this.handleClickOutside);\n    document.addEventListener('keydown', this.handleKeydown);\n  },\n  beforeDestroy() {\n    document.removeEventListener('click', this.handleClickOutside);\n    document.removeEventListener('keydown', this.handleKeydown);\n  },\n  methods: {\n    toggle() {\n      if (!this.disabled) {\n        this.isOpen = !this.isOpen;\n        if (this.isOpen) {\n          this.$nextTick(() => {\n            this.positionMenu();\n            this.focusFirstItem();\n          });\n        }\n      }\n    },\n    open() {\n      if (!this.disabled) {\n        this.isOpen = true;\n        this.$nextTick(() => {\n          this.positionMenu();\n          this.focusFirstItem();\n        });\n      }\n    },\n    close() {\n      this.isOpen = false;\n    },\n    handleClickOutside(event) {\n      if (!this.$el.contains(event.target)) {\n        this.close();\n      }\n    },\n    handleKeydown(event) {\n      if (!this.isOpen) return;\n\n      switch (event.key) {\n        case 'Escape':\n          this.close();\n          this.$refs.dropdown.querySelector('.dropdown-toggle').focus();\n          break;\n        case 'ArrowDown':\n          event.preventDefault();\n          this.focusNextItem();\n          break;\n        case 'ArrowUp':\n          event.preventDefault();\n          this.focusPreviousItem();\n          break;\n        case 'Home':\n          event.preventDefault();\n          this.focusFirstItem();\n          break;\n        case 'End':\n          event.preventDefault();\n          this.focusLastItem();\n          break;\n      }\n    },\n    positionMenu() {\n      const menu = this.$refs.menu;\n      const toggle = this.$refs.dropdown.querySelector('.dropdown-toggle');\n      \n      if (!menu || !toggle) return;\n\n      const toggleRect = toggle.getBoundingClientRect();\n      const menuRect = menu.getBoundingClientRect();\n      const viewportHeight = window.innerHeight;\n      const viewportWidth = window.innerWidth;\n\n      // Reset position\n      menu.style.top = '';\n      menu.style.left = '';\n      menu.style.right = '';\n      menu.style.bottom = '';\n\n      // Calculate position\n      let top = toggleRect.bottom + this.offset;\n      let left = toggleRect.left;\n\n      // Adjust for right alignment\n      if (this.right) {\n        left = toggleRect.right - menuRect.width;\n      }\n\n      // Adjust for dropup\n      if (this.up || (top + menuRect.height > viewportHeight && toggleRect.top > menuRect.height)) {\n        top = toggleRect.top - menuRect.height - this.offset;\n        menu.classList.add('dropdown-menu-up');\n      } else {\n        menu.classList.remove('dropdown-menu-up');\n      }\n\n      // Keep within viewport\n      if (left < 0) left = 0;\n      if (left + menuRect.width > viewportWidth) {\n        left = viewportWidth - menuRect.width;\n      }\n\n      menu.style.position = 'fixed';\n      menu.style.top = `${top}px`;\n      menu.style.left = `${left}px`;\n    },\n    getMenuItems() {\n      return Array.from(this.$refs.menu.querySelectorAll('.dropdown-item:not(.disabled):not(:disabled)'));\n    },\n    focusFirstItem() {\n      const items = this.getMenuItems();\n      if (items.length > 0) {\n        items[0].focus();\n      }\n    },\n    focusLastItem() {\n      const items = this.getMenuItems();\n      if (items.length > 0) {\n        items[items.length - 1].focus();\n      }\n    },\n    focusNextItem() {\n      const items = this.getMenuItems();\n      const currentIndex = items.findIndex(item => item === document.activeElement);\n      if (currentIndex < items.length - 1) {\n        items[currentIndex + 1].focus();\n      } else {\n        items[0].focus();\n      }\n    },\n    focusPreviousItem() {\n      const items = this.getMenuItems();\n      const currentIndex = items.findIndex(item => item === document.activeElement);\n      if (currentIndex > 0) {\n        items[currentIndex - 1].focus();\n      } else {\n        items[items.length - 1].focus();\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.base-dropdown {\n  position: relative;\n  display: inline-block;\n}\n\n.dropdown-menu {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 1000;\n  display: none;\n  min-width: 10rem;\n  padding: 0.5rem 0;\n  margin: 0.125rem 0 0;\n  font-size: 0.875rem;\n  color: #212529;\n  text-align: left;\n  list-style: none;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  border-radius: 0.25rem;\n  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.175);\n}\n\n.dropdown-menu.show {\n  display: block;\n}\n\n.dropdown-menu-right {\n  right: 0;\n  left: auto;\n}\n\n.dropdown-menu-up {\n  top: auto;\n  bottom: 100%;\n  margin-top: 0;\n  margin-bottom: 0.125rem;\n}\n\n:deep(.dropdown-item) {\n  display: block;\n  width: 100%;\n  padding: 0.25rem 1.5rem;\n  clear: both;\n  font-weight: 400;\n  color: #212529;\n  text-align: inherit;\n  white-space: nowrap;\n  background-color: transparent;\n  border: 0;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n:deep(.dropdown-item:hover),\n:deep(.dropdown-item:focus) {\n  color: #16181b;\n  background-color: #f8f9fa;\n}\n\n:deep(.dropdown-item.active),\n:deep(.dropdown-item:active) {\n  color: #fff;\n  background-color: #007bff;\n}\n\n:deep(.dropdown-item.disabled),\n:deep(.dropdown-item:disabled) {\n  color: #6c757d;\n  pointer-events: none;\n  background-color: transparent;\n}\n\n:deep(.dropdown-divider) {\n  height: 0;\n  margin: 0.5rem 0;\n  overflow: hidden;\n  border-top: 1px solid #e9ecef;\n}\n\n:deep(.dropdown-header) {\n  display: block;\n  padding: 0.5rem 1.5rem;\n  margin-bottom: 0;\n  font-size: 0.875rem;\n  color: #6c757d;\n  white-space: nowrap;\n}\n\n/* Transition */\n.dropdown-fade-enter-active,\n.dropdown-fade-leave-active {\n  transition: opacity 0.15s, transform 0.15s;\n}\n\n.dropdown-fade-enter,\n.dropdown-fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.dropdown-menu-up.dropdown-fade-enter,\n.dropdown-menu-up.dropdown-fade-leave-to {\n  transform: translateY(10px);\n}\n</style>"],"names":["_sfc_main","value","event","menu","toggle","toggleRect","menuRect","viewportHeight","viewportWidth","top","left","items","currentIndex","item","_createElementBlock","_normalizeClass","$options","_createElementVNode","$data","$props","args","_renderSlot","_ctx","_createVNode","_Transition"],"mappings":"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"}