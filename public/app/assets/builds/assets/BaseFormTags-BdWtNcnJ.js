import{_ as A,r as c,c as h,w as E,g as i,d as r,i as T,h as f,m as I,F as q,p as M,n as F,t as b,v as N,D as W,u as V}from"./application-BxW3Uzy-.js";import"/img/ggsheet.png";const $={class:"d-flex flex-wrap align-items-center"},j=["aria-label","onClick"],z=["placeholder","disabled","required"],K={key:0,class:"d-block invalid-feedback"},L={key:1,class:"d-block invalid-feedback"},P={key:2,class:"form-text text-muted"},R={__name:"BaseFormTags",props:{modelValue:{type:Array,default:()=>[]},separator:{type:[String,Array],default:" "},placeholder:{type:String,default:"Add tag..."},duplicateTagText:{type:String,default:"Duplicate tag(s)"},invalidTagText:{type:String,default:"Invalid tag(s)"},limit:{type:Number,default:null},limitTagsText:{type:String,default:"Tag limit reached"},addOnChange:{type:Boolean,default:!1},noAddOnEnter:{type:Boolean,default:!1},noOuterFocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},tagVariant:{type:String,default:"secondary"},tagClass:{type:[String,Array,Object],default:null},tagPills:{type:Boolean,default:!1},tagFormatter:{type:Function,default:null},tagValidator:{type:Function,default:null},removeOnDelete:{type:Boolean,default:!1},inputClass:{type:[String,Array,Object],default:null},inputMinWidth:{type:String,default:"5rem"}},emits:["update:modelValue","input","tag-state"],setup(t,{emit:O}){const l=t,o=O,d=c(null),s=c(""),p=c(!1),g=c(!1),v=c(!1),n=h({get:()=>l.modelValue||[],set:a=>{o("update:modelValue",a),o("input",a)}}),k=h(()=>l.limit&&n.value.length>=l.limit),x=h(()=>Array.isArray(l.separator)?l.separator:[l.separator]),S=a=>{const{key:e}=a;e==="Enter"&&!l.noAddOnEnter&&(a.preventDefault(),m()),x.value.includes(e)&&(a.preventDefault(),m()),(e==="Backspace"||e==="Delete"&&l.removeOnDelete)&&s.value===""&&n.value.length>0&&B(n.value.length-1)},w=()=>{if(l.addOnChange){for(const a of x.value)if(s.value.includes(a)){const e=s.value.split(a);s.value=e.pop()||"",e.filter(u=>u.trim()).forEach(u=>m(u));break}}},C=()=>{p.value=!0},D=()=>{p.value=!1,l.addOnChange&&s.value.trim()&&m()},m=(a=null)=>{const e=(a||s.value).trim();if(!e)return;if(g.value=!1,v.value=!1,n.value.includes(e)){g.value=!0,o("tag-state",[e],[],[e]);return}if(l.tagValidator&&!l.tagValidator(e)){v.value=!0,o("tag-state",[],[e],[]);return}if(l.limit&&n.value.length>=l.limit)return;const u=[...n.value,e];n.value=u,s.value="",o("tag-state",[e],[],[]),V(()=>{d.value&&d.value.focus()})},B=a=>{n.value[a];const e=n.value.filter((u,y)=>y!==a);n.value=e,V(()=>{d.value&&d.value.focus()})};return E(s,()=>{g.value=!1,v.value=!1}),(a,e)=>(r(),i("div",{class:F(["b-form-tags",{"form-control":!t.noOuterFocus,focus:p.value}])},[T("div",$,[(r(!0),i(q,null,M(n.value,(u,y)=>(r(),i("span",{key:`tag-${y}`,class:F(["badge badge-secondary mr-1 mb-1",t.tagClass])},[T("span",null,b(t.tagFormatter?t.tagFormatter(u):u),1),!t.disabled&&!t.readonly?(r(),i("button",{key:0,type:"button",class:"close ml-1","aria-label":`Remove tag: ${u}`,onClick:U=>B(y)},e[1]||(e[1]=[T("span",{"aria-hidden":"true"},"Ã—",-1)]),8,j)):f("",!0)],2))),128)),!t.disabled&&!t.readonly?I((r(),i("input",{key:0,ref_key:"input",ref:d,"onUpdate:modelValue":e[0]||(e[0]=u=>s.value=u),type:"text",class:"b-form-tags-input form-control-plaintext flex-grow-1",placeholder:t.placeholder,disabled:t.disabled||k.value,required:t.required&&n.value.length===0,onKeydown:S,onFocus:C,onBlur:D,onInput:w,style:W({minWidth:t.inputMinWidth})},null,44,z)),[[N,s.value]]):f("",!0)]),t.duplicateTagText&&g.value?(r(),i("div",K,b(t.duplicateTagText),1)):f("",!0),t.invalidTagText&&v.value?(r(),i("div",L,b(t.invalidTagText),1)):f("",!0),k.value&&n.value.length>=t.limit?(r(),i("small",P," Tag limit reached ")):f("",!0)],2))}},J=A(R,[["__scopeId","data-v-fe986158"]]);export{J as default};
//# sourceMappingURL=BaseFormTags-BdWtNcnJ.js.map
