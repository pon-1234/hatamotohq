{"version":3,"file":"BaseFormTags-CIQw-OSX.js","sources":["../../../../../app/javascript/src/components/base/BaseFormTags.vue"],"sourcesContent":["<template>\n  <div class=\"b-form-tags\" :class=\"{ 'form-control': !noOuterFocus, 'focus': isFocused }\">\n    <div class=\"d-flex flex-wrap align-items-center\">\n      <!-- Tags -->\n      <span\n        v-for=\"(tag, index) in tags\"\n        :key=\"`tag-${index}`\"\n        class=\"badge badge-secondary mr-1 mb-1\"\n        :class=\"tagClass\"\n      >\n        <span>{{ tagFormatter ? tagFormatter(tag) : tag }}</span>\n        <button\n          v-if=\"!disabled && !readonly\"\n          type=\"button\"\n          class=\"close ml-1\"\n          :aria-label=\"`Remove tag: ${tag}`\"\n          @click=\"removeTag(index)\"\n        >\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </span>\n\n      <!-- Input -->\n      <input\n        v-if=\"!disabled && !readonly\"\n        ref=\"input\"\n        v-model=\"inputValue\"\n        type=\"text\"\n        class=\"b-form-tags-input form-control-plaintext flex-grow-1\"\n        :placeholder=\"placeholder\"\n        :disabled=\"disabled || tagLimit\"\n        :required=\"required && tags.length === 0\"\n        @keydown=\"onKeydown\"\n        @focus=\"onFocus\"\n        @blur=\"onBlur\"\n        @input=\"onInput\"\n        :style=\"{ minWidth: inputMinWidth }\"\n      />\n    </div>\n\n    <!-- Duplicate warning -->\n    <div v-if=\"duplicateTagText && isDuplicate\" class=\"d-block invalid-feedback\">\n      {{ duplicateTagText }}\n    </div>\n\n    <!-- Invalid feedback -->\n    <div v-if=\"invalidTagText && isInvalid\" class=\"d-block invalid-feedback\">\n      {{ invalidTagText }}\n    </div>\n\n    <!-- Tag limit reached -->\n    <small v-if=\"tagLimit && tags.length >= limit\" class=\"form-text text-muted\">\n      Tag limit reached\n    </small>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, nextTick } from 'vue'\n\nconst props = defineProps({\n  modelValue: {\n    type: Array,\n    default: () => []\n  },\n  separator: {\n    type: [String, Array],\n    default: ' '\n  },\n  placeholder: {\n    type: String,\n    default: 'Add tag...'\n  },\n  duplicateTagText: {\n    type: String,\n    default: 'Duplicate tag(s)'\n  },\n  invalidTagText: {\n    type: String,\n    default: 'Invalid tag(s)'\n  },\n  limit: {\n    type: Number,\n    default: null\n  },\n  limitTagsText: {\n    type: String,\n    default: 'Tag limit reached'\n  },\n  addOnChange: {\n    type: Boolean,\n    default: false\n  },\n  noAddOnEnter: {\n    type: Boolean,\n    default: false\n  },\n  noOuterFocus: {\n    type: Boolean,\n    default: false\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  },\n  readonly: {\n    type: Boolean,\n    default: false\n  },\n  required: {\n    type: Boolean,\n    default: false\n  },\n  tagVariant: {\n    type: String,\n    default: 'secondary'\n  },\n  tagClass: {\n    type: [String, Array, Object],\n    default: null\n  },\n  tagPills: {\n    type: Boolean,\n    default: false\n  },\n  tagFormatter: {\n    type: Function,\n    default: null\n  },\n  tagValidator: {\n    type: Function,\n    default: null\n  },\n  removeOnDelete: {\n    type: Boolean,\n    default: false\n  },\n  inputClass: {\n    type: [String, Array, Object],\n    default: null\n  },\n  inputMinWidth: {\n    type: String,\n    default: '5rem'\n  }\n})\n\nconst emit = defineEmits(['update:modelValue', 'input', 'tag-state'])\n\nconst input = ref(null)\nconst inputValue = ref('')\nconst isFocused = ref(false)\nconst isDuplicate = ref(false)\nconst isInvalid = ref(false)\n\nconst tags = computed({\n  get: () => props.modelValue || [],\n  set: (value) => {\n    emit('update:modelValue', value)\n    emit('input', value)\n  }\n})\n\nconst tagLimit = computed(() => {\n  return props.limit && tags.value.length >= props.limit\n})\n\nconst separators = computed(() => {\n  if (Array.isArray(props.separator)) {\n    return props.separator\n  }\n  return [props.separator]\n})\n\nconst onKeydown = (event) => {\n  const { key } = event\n  \n  // Handle enter key\n  if (key === 'Enter' && !props.noAddOnEnter) {\n    event.preventDefault()\n    addTag()\n  }\n  \n  // Handle separator keys\n  if (separators.value.includes(key)) {\n    event.preventDefault()\n    addTag()\n  }\n  \n  // Handle backspace/delete\n  if ((key === 'Backspace' || (key === 'Delete' && props.removeOnDelete)) && \n      inputValue.value === '' && tags.value.length > 0) {\n    removeTag(tags.value.length - 1)\n  }\n}\n\nconst onInput = () => {\n  if (props.addOnChange) {\n    // Check for separators in the input\n    for (const separator of separators.value) {\n      if (inputValue.value.includes(separator)) {\n        const parts = inputValue.value.split(separator)\n        inputValue.value = parts.pop() || ''\n        parts.filter(p => p.trim()).forEach(part => addTag(part))\n        break\n      }\n    }\n  }\n}\n\nconst onFocus = () => {\n  isFocused.value = true\n}\n\nconst onBlur = () => {\n  isFocused.value = false\n  if (props.addOnChange && inputValue.value.trim()) {\n    addTag()\n  }\n}\n\nconst addTag = (value = null) => {\n  const newTag = (value || inputValue.value).trim()\n  \n  if (!newTag) return\n  \n  // Reset states\n  isDuplicate.value = false\n  isInvalid.value = false\n  \n  // Check for duplicates\n  if (tags.value.includes(newTag)) {\n    isDuplicate.value = true\n    emit('tag-state', [newTag], [], [newTag])\n    return\n  }\n  \n  // Validate tag\n  if (props.tagValidator && !props.tagValidator(newTag)) {\n    isInvalid.value = true\n    emit('tag-state', [], [newTag], [])\n    return\n  }\n  \n  // Check limit\n  if (props.limit && tags.value.length >= props.limit) {\n    return\n  }\n  \n  // Add tag\n  const newTags = [...tags.value, newTag]\n  tags.value = newTags\n  inputValue.value = ''\n  \n  emit('tag-state', [newTag], [], [])\n  \n  // Focus back to input\n  nextTick(() => {\n    if (input.value) {\n      input.value.focus()\n    }\n  })\n}\n\nconst removeTag = (index) => {\n  const removed = tags.value[index]\n  const newTags = tags.value.filter((_, i) => i !== index)\n  tags.value = newTags\n  \n  // Focus back to input\n  nextTick(() => {\n    if (input.value) {\n      input.value.focus()\n    }\n  })\n}\n\n// Clear states when input changes\nwatch(inputValue, () => {\n  isDuplicate.value = false\n  isInvalid.value = false\n})\n</script>\n\n<style scoped>\n.b-form-tags {\n  min-height: calc(1.5em + 0.75rem + 2px);\n  padding: 0.25rem 0.5rem;\n  display: block;\n  width: 100%;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  color: #495057;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid #ced4da;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n\n.b-form-tags.focus {\n  color: #495057;\n  background-color: #fff;\n  border-color: #80bdff;\n  outline: 0;\n  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n}\n\n.b-form-tags-input {\n  border: 0;\n  padding: 0;\n  margin: 0;\n  background: transparent;\n  max-width: 100%;\n  outline: none;\n  flex: 1 1 auto;\n  width: auto;\n  margin-bottom: 0.25rem;\n}\n\n.b-form-tags-input:focus {\n  box-shadow: none;\n}\n\n.badge {\n  display: inline-flex;\n  align-items: center;\n  padding: 0.25rem 0.5rem;\n  font-size: 0.875rem;\n  font-weight: 700;\n}\n\n.badge .close {\n  margin-left: 0.25rem;\n  font-size: 1.2rem;\n  font-weight: 700;\n  line-height: 1;\n  color: inherit;\n  text-shadow: none;\n  opacity: 0.8;\n  padding: 0;\n  background: transparent;\n  border: 0;\n  cursor: pointer;\n}\n\n.badge .close:hover {\n  opacity: 1;\n}\n</style> "],"names":["props","__props","emit","__emit","input","ref","inputValue","isFocused","isDuplicate","isInvalid","tags","computed","value","tagLimit","separators","onKeydown","event","key","addTag","removeTag","onInput","separator","parts","p","part","onFocus","onBlur","newTag","newTags","nextTick","index","_","i","watch","_createElementBlock","_normalizeClass","_createElementVNode","_hoisted_1","_openBlock","_Fragment","_renderList","tag","$event","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6"],"mappings":"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"}