{"version":3,"file":"BaseForm-ghd4XYYK.js","sources":["../../../../../app/javascript/src/components/base/BaseForm.vue"],"sourcesContent":["<template>\n  <validation-observer\n    ref=\"observer\"\n    v-slot=\"{ invalid, validated, errors, pending }\"\n  >\n    <form\n      :id=\"id\"\n      :class=\"{ 'form-inline': inline }\"\n      :novalidate=\"novalidate\"\n      @submit.prevent=\"handleSubmit\"\n      @reset.prevent=\"handleReset\"\n    >\n      <!-- Form Header -->\n      <div v-if=\"title || $slots.header\" class=\"form-header mb-4\">\n        <h4 v-if=\"title\" class=\"mb-0\">{{ title }}</h4>\n        <slot name=\"header\" />\n      </div>\n\n      <!-- Form Description -->\n      <div v-if=\"description || $slots.description\" class=\"form-description mb-4\">\n        <p v-if=\"description\" class=\"text-muted\">{{ description }}</p>\n        <slot name=\"description\" />\n      </div>\n\n      <!-- Error Summary -->\n      <div\n        v-if=\"showErrorSummary && Object.keys(errors).length\"\n        class=\"alert alert-danger\"\n        role=\"alert\"\n      >\n        <h6 class=\"alert-heading\">入力エラーがあります</h6>\n        <ul class=\"mb-0 pl-3\">\n          <li v-for=\"(error, field) in errors\" :key=\"field\">\n            {{ error[0] }}\n          </li>\n        </ul>\n      </div>\n\n      <!-- Success Message -->\n      <div\n        v-if=\"successMessage\"\n        class=\"alert alert-success alert-dismissible fade show\"\n        role=\"alert\"\n      >\n        {{ successMessage }}\n        <button\n          type=\"button\"\n          class=\"btn-close\"\n          aria-label=\"Close\"\n          @click=\"successMessage = ''\"\n        ></button>\n      </div>\n\n      <!-- Form Content -->\n      <div class=\"form-content\">\n        <slot :errors=\"errors\" :pending=\"pending\" />\n      </div>\n\n      <!-- Form Actions -->\n      <div v-if=\"!hideActions\" class=\"form-actions mt-4\">\n        <slot name=\"actions\" :invalid=\"invalid\" :validated=\"validated\" :pending=\"pending\">\n          <button\n            v-if=\"showResetButton\"\n            type=\"reset\"\n            class=\"btn btn-outline-secondary me-2\"\n            :disabled=\"loading\"\n          >\n            {{ resetText }}\n          </button>\n          <button\n            type=\"submit\"\n            class=\"btn\"\n            :class=\"[`btn-${submitVariant}`, submitClass]\"\n            :disabled=\"loading || (validated && invalid)\"\n          >\n            <BaseSpinner v-if=\"loading\" size=\"sm\" class=\"me-1\" />\n            {{ loading ? loadingText : submitText }}\n          </button>\n        </slot>\n      </div>\n    </form>\n  </validation-observer>\n</template>\n\n<script setup>\nimport { ref, nextTick } from 'vue';\nimport BaseSpinner from './BaseSpinner.vue';\n\n// Props\nconst props = defineProps({\n  id: {\n    type: String,\n    default: null\n  },\n  title: {\n    type: String,\n    default: ''\n  },\n  description: {\n    type: String,\n    default: ''\n  },\n  inline: {\n    type: Boolean,\n    default: false\n  },\n  novalidate: {\n    type: Boolean,\n    default: true\n  },\n  loading: {\n    type: Boolean,\n    default: false\n  },\n  hideActions: {\n    type: Boolean,\n    default: false\n  },\n  showResetButton: {\n    type: Boolean,\n    default: false\n  },\n  showErrorSummary: {\n    type: Boolean,\n    default: true\n  },\n  submitText: {\n    type: String,\n    default: '保存'\n  },\n  loadingText: {\n    type: String,\n    default: '処理中...'\n  },\n  resetText: {\n    type: String,\n    default: 'リセット'\n  },\n  submitVariant: {\n    type: String,\n    default: 'primary'\n  },\n  submitClass: {\n    type: String,\n    default: ''\n  },\n  validateOnSubmit: {\n    type: Boolean,\n    default: true\n  }\n});\n\n// Emits\nconst emit = defineEmits(['submit', 'reset']);\n\n// Refs\nconst observer = ref(null);\nconst successMessage = ref('');\n\n// Methods\nconst handleSubmit = async () => {\n  if (props.loading) return;\n\n  if (props.validateOnSubmit && observer.value) {\n    const isValid = await observer.value.validate();\n    if (!isValid) {\n      focusFirstError();\n      return;\n    }\n  }\n\n  emit('submit');\n};\n\nconst handleReset = () => {\n  if (observer.value) {\n    observer.value.reset();\n  }\n  emit('reset');\n};\n\nconst validate = async () => {\n  if (observer.value) {\n    return await observer.value.validate();\n  }\n  return true;\n};\n\nconst reset = () => {\n  if (observer.value) {\n    observer.value.reset();\n  }\n};\n\nconst setErrors = (errors) => {\n  if (observer.value) {\n    observer.value.setErrors(errors);\n  }\n};\n\nconst focusFirstError = () => {\n  nextTick(() => {\n    const form = document.getElementById(props.id) || document.querySelector('form');\n    if (form) {\n      const firstError = form.querySelector('.is-invalid');\n      if (firstError) {\n        firstError.focus();\n        firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      }\n    }\n  });\n};\n\nconst showSuccess = (message) => {\n  successMessage.value = message;\n};\n\n// Expose methods for parent component access\ndefineExpose({\n  validate,\n  reset,\n  setErrors,\n  focusFirstError,\n  showSuccess\n});\n</script>\n\n<style scoped>\n.form-header {\n  border-bottom: 2px solid #e9ecef;\n  padding-bottom: 1rem;\n}\n\n.form-actions {\n  border-top: 1px solid #e9ecef;\n  padding-top: 1.5rem;\n}\n\n.form-content :deep(.form-group) {\n  margin-bottom: 1.25rem;\n}\n\n.form-content :deep(.form-label) {\n  font-weight: 500;\n  margin-bottom: 0.5rem;\n}\n\n.form-content :deep(.invalid-feedback) {\n  display: block;\n  margin-top: 0.25rem;\n}\n\n.form-inline {\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n}\n\n.form-inline .form-content {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.btn-close {\n  box-sizing: content-box;\n  width: 1em;\n  height: 1em;\n  padding: 0.25em;\n  color: #000;\n  background: transparent url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e\") center/1em auto no-repeat;\n  border: 0;\n  border-radius: 0.25rem;\n  opacity: 0.5;\n}\n\n.btn-close:hover {\n  opacity: 0.75;\n}\n\n.me-1 {\n  margin-right: 0.25rem !important;\n}\n\n.me-2 {\n  margin-right: 0.5rem !important;\n}\n</style>"],"names":["props","__props","emit","__emit","observer","ref","successMessage","handleSubmit","focusFirstError","handleReset","validate","reset","setErrors","errors","nextTick","form","firstError","__expose","message","_createBlock","_component_validation_observer","_withCtx","invalid","validated","pending","_createElementVNode","$slots","_openBlock","_createElementBlock","_hoisted_2","_hoisted_3","_toDisplayString","_renderSlot","_ctx","_hoisted_4","_hoisted_5","_hoisted_6","_cache","_hoisted_7","_Fragment","_renderList","error","field","_hoisted_8","_createTextVNode","_hoisted_9","_hoisted_10","_hoisted_11","_normalizeClass","BaseSpinner"],"mappings":"yvCAyFA,MAAMA,EAAQC,EAgERC,EAAOC,EAGPC,EAAWC,EAAI,IAAI,EACnBC,EAAiBD,EAAI,EAAE,EAGvBE,EAAe,SAAY,CAC/B,GAAI,CAAAP,EAAM,QAEV,IAAIA,EAAM,kBAAoBI,EAAS,OAEjC,CADY,MAAMA,EAAS,MAAM,SAAU,EACjC,CACZI,EAAiB,EACjB,MACN,CAGEN,EAAK,QAAQ,EACf,EAEMO,EAAc,IAAM,CACpBL,EAAS,OACXA,EAAS,MAAM,MAAO,EAExBF,EAAK,OAAO,CACd,EAEMQ,EAAW,SACXN,EAAS,MACJ,MAAMA,EAAS,MAAM,SAAU,EAEjC,GAGHO,EAAQ,IAAM,CACdP,EAAS,OACXA,EAAS,MAAM,MAAO,CAE1B,EAEMQ,EAAaC,GAAW,CACxBT,EAAS,OACXA,EAAS,MAAM,UAAUS,CAAM,CAEnC,EAEML,EAAkB,IAAM,CAC5BM,EAAS,IAAM,CACb,MAAMC,EAAO,SAAS,eAAef,EAAM,EAAE,GAAK,SAAS,cAAc,MAAM,EAC/E,GAAIe,EAAM,CACR,MAAMC,EAAaD,EAAK,cAAc,aAAa,EAC/CC,IACFA,EAAW,MAAO,EAClBA,EAAW,eAAe,CAAE,SAAU,SAAU,MAAO,SAAU,EAEzE,CACA,CAAG,CACH,EAOA,OAAAC,EAAa,CACX,SAAAP,EACA,MAAAC,EACA,UAAAC,EACA,gBAAAJ,EACA,YAVmBU,GAAY,CAC/BZ,EAAe,MAAQY,CACzB,CASA,CAAC,sDA/NCC,EAgFsBC,EAAA,SA/EhB,WAAJ,IAAIhB,IAGJ,QAAAiB,EAAA,CA2EO,CA7EG,QAAAC,EAAS,UAAAC,EAAW,OAAAV,EAAQ,QAAAW,KAAO,CAE7CC,EA2EO,OAAA,CA1EJ,GAAIxB,EAAE,GACN,uBAAwBA,EAAM,MAAA,CAAA,EAC9B,WAAYA,EAAU,WACtB,WAAgBM,EAAY,CAAA,SAAA,CAAA,EAC5B,UAAeE,EAAW,CAAA,SAAA,CAAA,IAGhBR,EAAK,OAAIyB,EAAM,OAAC,QAA3BC,IAAAC,EAGM,MAHNC,EAGM,CAFM5B,EAAK,WAAf2B,EAA8C,KAA9CE,EAA8CC,EAAb9B,EAAK,KAAA,EAAA,CAAA,YACtC+B,EAAsBC,EAAA,OAAA,SAAA,CAAA,EAAA,OAAA,EAAA,cAIbhC,EAAW,aAAIyB,EAAM,OAAC,aAAjCC,IAAAC,EAGM,MAHNM,EAGM,CAFKjC,EAAW,iBAApB2B,EAA8D,IAA9DO,EAA8DJ,EAAlB9B,EAAW,WAAA,EAAA,CAAA,YACvD+B,EAA2BC,EAAA,OAAA,cAAA,CAAA,EAAA,OAAA,EAAA,cAKrBhC,EAAA,kBAAoB,OAAO,KAAKY,CAAM,EAAE,QADhDc,IAAAC,EAWM,MAXNQ,EAWM,CANJC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAZ,EAAyC,KAArC,CAAA,MAAM,eAAe,EAAC,aAAU,EAAA,GACpCA,EAIK,KAJLa,EAIK,EAHHX,EAAA,EAAA,EAAAC,EAEKW,EAFwB,KAAAC,EAAA3B,EAAjB,CAAA4B,EAAOC,KAAnBf,EAAA,EAAAC,EAEK,KAFiC,CAAA,IAAKc,KACtCD,EAAK,CAAA,CAAA,EAAA,CAAA,wBAONnC,EAAc,OADtBqB,IAAAC,EAYM,MAZNe,EAYM,CAPDC,EAAAb,EAAAzB,EAAA,KAAc,EAAG,IACpB,CAAA,EAAAmB,EAKU,SAAA,CAJR,KAAK,SACL,MAAM,YACN,aAAW,QACV,uBAAOnB,EAAc,MAAA,kBAK1BmB,EAEM,MAFNoB,EAEM,CADJb,EAA4CC,EAAA,OAAA,UAAA,CAArC,OAAQpB,EAAS,QAASW,gBAIvBvB,EAAW,sBAAvB0B,IAAAC,EAoBM,MApBNkB,EAoBM,CAnBJd,EAkBOC,EAAA,OAAA,UAAA,CAlBe,QAASX,EAAU,UAAWC,EAAY,QAASC,GAAzE,IAkBO,CAhBGvB,EAAe,qBADvB2B,EAOS,SAAA,OALP,KAAK,QACL,MAAM,iCACL,SAAU3B,EAAO,WAEfA,EAAS,SAAA,EAAA,EAAA8C,CAAA,YAEdtB,EAQS,SAAA,CAPP,KAAK,SACL,MAAMuB,EAAA,CAAA,MACU,CAAA,OAAA/C,EAAA,aAAa,GAAIA,EAAW,WAAA,CAAA,CAAA,EAC3C,SAAUA,EAAA,SAAYsB,GAAaD,IAEjBrB,EAAO,aAA1BkB,EAAqD8B,EAAA,OAAzB,KAAK,KAAK,MAAM,mBAASL,EAAA,IAClDb,EAAA9B,EAAA,QAAUA,EAAA,YAAcA,EAAU,UAAA,EAAA,CAAA"}