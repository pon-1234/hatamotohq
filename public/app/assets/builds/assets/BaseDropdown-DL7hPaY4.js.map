{"version":3,"file":"BaseDropdown-DL7hPaY4.js","sources":["../../../../../app/javascript/src/components/base/BaseDropdown.vue"],"sourcesContent":["<template>\n  <div class=\"base-dropdown\" :class=\"dropdownClasses\" ref=\"dropdown\">\n    <!-- Dropdown Toggle -->\n    <button\n      :id=\"toggleId\"\n      class=\"dropdown-toggle\"\n      :class=\"toggleClasses\"\n      :disabled=\"disabled\"\n      type=\"button\"\n      aria-haspopup=\"true\"\n      :aria-expanded=\"isOpen\"\n      @click=\"toggle\"\n    >\n      <slot name=\"button-content\">\n        {{ text }}\n      </slot>\n    </button>\n\n    <!-- Dropdown Menu -->\n    <transition name=\"dropdown-fade\">\n      <div\n        v-show=\"isOpen\"\n        class=\"dropdown-menu\"\n        :class=\"menuClasses\"\n        :aria-labelledby=\"toggleId\"\n        ref=\"menu\"\n      >\n        <slot />\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, onBeforeUnmount, nextTick } from 'vue';\n\nconst props = defineProps({\n  text: {\n    type: String,\n    default: ''\n  },\n  variant: {\n    type: String,\n    default: 'secondary'\n  },\n  size: {\n    type: String,\n    default: 'md',\n    validator: (value) => ['sm', 'md', 'lg'].includes(value)\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  },\n  right: {\n    type: Boolean,\n    default: false\n  },\n  up: {\n    type: Boolean,\n    default: false\n  },\n  offset: {\n    type: Number,\n    default: 0\n  },\n  boundary: {\n    type: String,\n    default: 'scrollParent'\n  },\n  split: {\n    type: Boolean,\n    default: false\n  }\n});\n\n// State\nconst isOpen = ref(false);\nconst toggleId = `dropdown-toggle-${Math.random().toString(36).substr(2, 9)}`;\nconst dropdown = ref(null);\nconst menu = ref(null);\n\n// Computed\nconst dropdownClasses = computed(() => {\n  return {\n    'dropdown': !props.up,\n    'dropup': props.up,\n    'show': isOpen.value\n  };\n});\n\nconst toggleClasses = computed(() => {\n  return [\n    'btn',\n    `btn-${props.variant}`,\n    `btn-${props.size}`,\n    {\n      'dropdown-toggle-split': props.split\n    }\n  ];\n});\n\nconst menuClasses = computed(() => {\n  return {\n    'show': isOpen.value,\n    'dropdown-menu-right': props.right,\n    'dropdown-menu-up': props.up\n  };\n});\n\n// Lifecycle\nonMounted(() => {\n  document.addEventListener('click', handleClickOutside);\n  document.addEventListener('keydown', handleKeydown);\n});\n\nonBeforeUnmount(() => {\n  document.removeEventListener('click', handleClickOutside);\n  document.removeEventListener('keydown', handleKeydown);\n});\n\n// Methods\nconst toggle = () => {\n  if (!props.disabled) {\n    isOpen.value = !isOpen.value;\n    if (isOpen.value) {\n      nextTick(() => {\n        positionMenu();\n        focusFirstItem();\n      });\n    }\n  }\n};\n\nconst open = () => {\n  if (!props.disabled) {\n    isOpen.value = true;\n    nextTick(() => {\n      positionMenu();\n      focusFirstItem();\n    });\n  }\n};\n\nconst close = () => {\n  isOpen.value = false;\n};\n\nconst handleClickOutside = (event) => {\n  if (!dropdown.value.contains(event.target)) {\n    close();\n  }\n};\n\nconst handleKeydown = (event) => {\n  if (!isOpen.value) return;\n\n  switch (event.key) {\n    case 'Escape':\n      close();\n      dropdown.value.querySelector('.dropdown-toggle').focus();\n      break;\n    case 'ArrowDown':\n      event.preventDefault();\n      focusNextItem();\n      break;\n    case 'ArrowUp':\n      event.preventDefault();\n      focusPreviousItem();\n      break;\n    case 'Home':\n      event.preventDefault();\n      focusFirstItem();\n      break;\n    case 'End':\n      event.preventDefault();\n      focusLastItem();\n      break;\n  }\n};\n\nconst positionMenu = () => {\n  const menuEl = menu.value;\n  const toggle = dropdown.value.querySelector('.dropdown-toggle');\n  \n  if (!menuEl || !toggle) return;\n\n  const toggleRect = toggle.getBoundingClientRect();\n  const menuRect = menuEl.getBoundingClientRect();\n  const viewportHeight = window.innerHeight;\n  const viewportWidth = window.innerWidth;\n\n  // Reset position\n  menuEl.style.top = '';\n  menuEl.style.left = '';\n  menuEl.style.right = '';\n  menuEl.style.bottom = '';\n\n  // Calculate position\n  let top = toggleRect.bottom + props.offset;\n  let left = toggleRect.left;\n\n  // Adjust for right alignment\n  if (props.right) {\n    left = toggleRect.right - menuRect.width;\n  }\n\n  // Adjust for dropup\n  if (props.up || (top + menuRect.height > viewportHeight && toggleRect.top > menuRect.height)) {\n    top = toggleRect.top - menuRect.height - props.offset;\n    menuEl.classList.add('dropdown-menu-up');\n  } else {\n    menuEl.classList.remove('dropdown-menu-up');\n  }\n\n  // Keep within viewport\n  if (left < 0) left = 0;\n  if (left + menuRect.width > viewportWidth) {\n    left = viewportWidth - menuRect.width;\n  }\n\n  menuEl.style.position = 'fixed';\n  menuEl.style.top = `${top}px`;\n  menuEl.style.left = `${left}px`;\n};\n\nconst getMenuItems = () => {\n  return Array.from(menu.value.querySelectorAll('.dropdown-item:not(.disabled):not(:disabled)'));\n};\n\nconst focusFirstItem = () => {\n  const items = getMenuItems();\n  if (items.length > 0) {\n    items[0].focus();\n  }\n};\n\nconst focusLastItem = () => {\n  const items = getMenuItems();\n  if (items.length > 0) {\n    items[items.length - 1].focus();\n  }\n};\n\nconst focusNextItem = () => {\n  const items = getMenuItems();\n  const currentIndex = items.findIndex(item => item === document.activeElement);\n  if (currentIndex < items.length - 1) {\n    items[currentIndex + 1].focus();\n  } else {\n    items[0].focus();\n  }\n};\n\nconst focusPreviousItem = () => {\n  const items = getMenuItems();\n  const currentIndex = items.findIndex(item => item === document.activeElement);\n  if (currentIndex > 0) {\n    items[currentIndex - 1].focus();\n  } else {\n    items[items.length - 1].focus();\n  }\n};\n</script>\n\n<style scoped>\n.base-dropdown {\n  position: relative;\n  display: inline-block;\n}\n\n.dropdown-menu {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  z-index: 1000;\n  display: none;\n  min-width: 10rem;\n  padding: 0.5rem 0;\n  margin: 0.125rem 0 0;\n  font-size: 0.875rem;\n  color: #212529;\n  text-align: left;\n  list-style: none;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid rgba(0, 0, 0, 0.15);\n  border-radius: 0.25rem;\n  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.175);\n}\n\n.dropdown-menu.show {\n  display: block;\n}\n\n.dropdown-menu-right {\n  right: 0;\n  left: auto;\n}\n\n.dropdown-menu-up {\n  top: auto;\n  bottom: 100%;\n  margin-top: 0;\n  margin-bottom: 0.125rem;\n}\n\n:deep(.dropdown-item) {\n  display: block;\n  width: 100%;\n  padding: 0.25rem 1.5rem;\n  clear: both;\n  font-weight: 400;\n  color: #212529;\n  text-align: inherit;\n  white-space: nowrap;\n  background-color: transparent;\n  border: 0;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n:deep(.dropdown-item:hover),\n:deep(.dropdown-item:focus) {\n  color: #16181b;\n  background-color: #f8f9fa;\n}\n\n:deep(.dropdown-item.active),\n:deep(.dropdown-item:active) {\n  color: #fff;\n  background-color: #007bff;\n}\n\n:deep(.dropdown-item.disabled),\n:deep(.dropdown-item:disabled) {\n  color: #6c757d;\n  pointer-events: none;\n  background-color: transparent;\n}\n\n:deep(.dropdown-divider) {\n  height: 0;\n  margin: 0.5rem 0;\n  overflow: hidden;\n  border-top: 1px solid #e9ecef;\n}\n\n:deep(.dropdown-header) {\n  display: block;\n  padding: 0.5rem 1.5rem;\n  margin-bottom: 0;\n  font-size: 0.875rem;\n  color: #6c757d;\n  white-space: nowrap;\n}\n\n/* Transition */\n.dropdown-fade-enter-active,\n.dropdown-fade-leave-active {\n  transition: opacity 0.15s, transform 0.15s;\n}\n\n.dropdown-fade-enter,\n.dropdown-fade-leave-to {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n.dropdown-menu-up.dropdown-fade-enter,\n.dropdown-menu-up.dropdown-fade-leave-to {\n  transform: translateY(10px);\n}\n</style>"],"names":["props","__props","isOpen","ref","toggleId","dropdown","menu","dropdownClasses","computed","toggleClasses","menuClasses","onMounted","handleClickOutside","handleKeydown","onBeforeUnmount","toggle","nextTick","positionMenu","focusFirstItem","close","event","focusNextItem","focusPreviousItem","focusLastItem","menuEl","toggleRect","menuRect","viewportHeight","viewportWidth","top","left","getMenuItems","items","currentIndex","item","_createElementBlock","_normalizeClass","_createElementVNode","_renderSlot","_ctx","_createVNode","_Transition"],"mappings":"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"}